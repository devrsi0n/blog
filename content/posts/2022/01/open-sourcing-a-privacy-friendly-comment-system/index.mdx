---
title: å¼€æºäº†æˆ‘ç‹¬ç«‹å¼€å‘çš„è¯„è®ºç»„ä»¶ SaaS ğŸ”¥Â ğŸš€
author: devrsi0n
date: 2022-01-15
excerpt: åœ¨ç‹¬ç«‹å¼€å‘ä¸€å¹´åï¼Œä»Šå¤©å¼€æºäº†æˆ‘çš„ Next.js App - Chirpy, ä¸€ä¸ªä¸»æ‰“ä¿æŠ¤éšç§ã€æ”¯æŒä¸»é¢˜å®šåˆ¶çš„è¯„è®ºç»„ä»¶ SaaSã€‚
hero: ./images/hero.jpeg
heroRef: <a href="https://unsplash.com/@mbaumi?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Mika Baumeister</a> äº <a href="https://unsplash.com/s/photos/startup?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>
tags: ['SaaS', 'next.js', 'Open source']
---

ğŸ‘‹Â  å¤§å®¶å¥½ï¼Œåœ¨ç‹¬ç«‹å¼€å‘ä¸€å¹´åï¼Œä»Šå¤©å¼€æºäº†æˆ‘çš„ Next.js App - [Chirpy](https://github.com/devrsi0n/chirpy), ä¸€ä¸ªä¸»æ‰“ä¿æŠ¤éšç§ã€æ”¯æŒä¸»é¢˜å®šåˆ¶çš„è¯„è®ºç»„ä»¶ SaaSã€‚

## å¤ªé•¿ä¸çœ‹ç‰ˆ ğŸ™ˆ

è¿™æ˜¯ [GitHub Repo](https://github.com/devrsi0n/chirpy), æ¬¢è¿ç‚¹äº® ğŸŒŸÂ  æ”¶è—ï¼Œæ¬¢è¿å‚ä¸è´¡çŒ®ã€‚å¯¹äºåˆã€ä¸­çº§å·¥ç¨‹å¸ˆè¿™é‡Œæœ‰æ‰€æœ‰ä½ éœ€è¦çŸ¥é“çš„ä¸€ä¸ªå®Œæ•´çš„ SaaS æ€ä¹ˆè¿ä½œçš„å…¨éƒ¨çŸ¥è¯†ï¼Œéå¸¸é€‚åˆå­¦ä¹ ã€‚

[å®˜ç½‘](https://chirpy.dev/)ç›®å‰æ­£åœ¨ beta æµ‹è¯•ï¼Œæ¬¢è¿è¯•ç”¨ã€‚å¦‚æœæƒ³è¦æ•°æ®å®Œå…¨ç”±ä½ æ§åˆ¶ï¼ŒChirp ä¹Ÿæ”¯æŒ [docker éƒ¨ç½²](https://chirpy.dev/docs/self-hosted) ã€‚

## é¢„è§ˆ ğŸ‘€

è¯„è®ºç»„ä»¶ï¼Œæ”¯æŒå¯Œæ–‡æœ¬ç¼–è¾‘å’Œ [markdown shortcuts](https://chirpy.dev/docs/features/markdown) ï¼ˆmarkdown å®æ—¶é¢„è§ˆï¼Œç±»ä¼¼ [typora](https://typora.io/) çš„ä¹¦å†™ä½“éªŒï¼‰

![Untitled](./images//Untitled.png)

ä¸»é¢˜å®šåˆ¶ ğŸŒˆï¼ˆæ›´å¤šå®šåˆ¶é¡¹å¼€å‘ä¸­ï¼‰

![Untitled](./images//Untitled%201.png)

ç»„ä»¶ä½¿ç”¨æƒ…å†µåˆ†æé¢æ¿(Analytics) ğŸ“ˆ

![Untitled](./images//Untitled%202.png)

## åˆå¿ƒ â¤ï¸

æˆ‘åœ¨æ„å»ºæˆ‘è‡ªå·±çš„[åšå®¢](https://devrsi0n.com)çš„æ—¶å€™æƒ³è¦ä¸€ä¸ªç±»ä¼¼ [Disqus](https://disqus.com/) ä¸€æ ·çš„åŠŸèƒ½ä¸°å¯Œã€æ¥å…¥å¿«æ·çš„è¯„è®ºç»„ä»¶ï¼Œä½† Disqus æœ¬èº«è¿™å‡ å¹´å› ä¸ºä¸ç»ç”¨æˆ·åŒæ„å°±ç§åŠ å¹¿å‘Šï¼Œå‡ºå–ç”¨æˆ·éšç§ç­‰é—®é¢˜å¹¿ä¸ºè¯Ÿç—…ã€‚ä¸‹é¢æ˜¯æˆ‘æ£€ç´¢åˆ°çš„ä¸€äº›æŠ¥é“ï¼š

[Bloomberg LawDisqus Faces \$3 Million Sanction Over Alleged GDPR Breachesfor multiple breaches of EU privacy law.](https://news.bloomberglaw.com/privacy-and-data-security/disqus-faces-3-million-sanction-over-alleged-gdpr-breaches)

[](https://news.bloomberglaw.com/privacy-and-data-security/disqus-faces-3-million-sanction-over-alleged-gdpr-breaches)[Disqus facing \$3M fine in Norway for tracking users without consent](https://techcrunch.com/2021/05/05/disqus-facing-3m-fine-in-norway-for-tracking-users-without-consent/)

æˆ‘ä¹Ÿç”¨è¿‡ [gitalk](https://github.com/gitalk/gitalk) [utterances](https://github.com/utterance/utterances) ä¹‹ç±»çš„åŸºäº GitHub API çš„å…è´¹è¯„è®ºç³»ç»Ÿï¼Œå®ƒä»¬æœ‰ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é—®é¢˜å°±æ˜¯åªæ”¯æŒ GitHub ç™»é™†ï¼Œè€Œä¸”å—é™ GitHub æœ¬èº« APIï¼Œå¾ˆå¤šåŠŸèƒ½å¹¶ä¸å¥½åšï¼Œæ¯”å¦‚ç»„ä»¶çš„ä½¿ç”¨æƒ…å†µåˆ†æ/ Analyticsã€‚

å¸‚é¢çš„ç»„ä»¶åŸºæœ¬éƒ½ç¼ºä¹ä¸»é¢˜å®šåˆ¶èƒ½åŠ›ï¼Œæ”¾åœ¨è‡ªå·±çš„åšå®¢ã€ç½‘ç«™æœ‰å¾ˆå¤§æ¦‚ç‡å› ä¸ºè®¾è®¡ä¸åè°ƒå¯¼è‡´çš„è¿å’Œæ„Ÿï¼Œæ‰€ä»¥ä¸»é¢˜å®šåˆ¶ä¹Ÿæ˜¯å¿…è¦çš„ã€‚

åŸºäºä»¥ä¸Šç§ç§é—®é¢˜æ‰€ä»¥æˆ‘æ‰“ç®—åšä¸€ä¸ªå®Œå…¨å¼€æºåŒæ—¶ä¹Ÿèƒ½è§£å†³ä»¥ä¸Šç—›ç‚¹çš„è¯„è®ºç»„ä»¶ç³»ç»Ÿã€‚

## æŠ€æœ¯é€‰æ‹©ä¸æ¼”è¿› ğŸ•º

### Next.js ğŸ†š Gatsby

æ—¶é—´å€’å›åˆ° 2020 å¹´ï¼Œå½“å¹´ React SSR æ¡†æ¶ Next.js æ¨å‡ºäº† [SSG](https://nextjs.org/blog/next-9-3#next-gen-static-site-generation-ssg-support)ï¼ˆStatic Site Generationï¼‰å’Œ [ISR](https://nextjs.org/blog/next-9-5#stable-incremental-static-regeneration)ï¼ˆIncremental Static Regenerationï¼‰, è¿…é€Ÿå˜å¾—ç‚™æ‰‹å¯çƒ­ï¼Œç›¸æ¯” 2019 å¹´å¤§çƒ­çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ Gatsby ä¼˜åŠ¿æ˜æ˜¾ã€‚ï¼ˆå¦‚æœæ”¾åœ¨ä»Šå¤©é‡æ–°é€‰æ‹©ï¼Œ[remix](https://remix.run/) ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚ğŸ˜„ï¼‰

|             | Gatsby | Next.js |
| ----------- | ------ | ------- |
| SSR         | ğŸ”´     | âœ…Â      |
| SSG         | âœ…     | âœ…Â      |
| ISR         | ğŸ”´     | âœ…Â      |
| BUILD SPEED | ğŸŒ     | âš¡ï¸     |
| HMR SPEED   | ğŸŒ     | âš¡ï¸     |

[npm è¶‹åŠ¿å›¾](https://www.npmtrends.com/gatsby-vs-next)ï¼š

![Untitled](./images//Untitled%203.png)

Next.js çš„ [ISR](https://vercel.com/docs/concepts/next.js/incremental-static-regeneration#fetching-data)ï¼ˆå¢é‡é™æ€æ›´æ–°ï¼‰ ç‰¹æ€§ç‰¹åˆ«é€‚åˆè¯„è®ºç»„ä»¶çš„åœºæ™¯ã€‚æƒ³è±¡æœ‰æˆåƒä¸Šä¸‡ä¸ª iframe è¯„è®ºç»„ä»¶ï¼Œç”¨ ISR æ¸²æŸ“æ—¢æœ‰äº†ç±»ä¼¼ SSR çš„çµæ´»æ€§ï¼Œä¹Ÿæœ‰ CDN çš„åŠ é€ŸåŠ æŒï¼ˆå‡å°‘å¹¶å‘æ¸²æŸ“ï¼‰ã€‚ä¸‹å›¾æ˜¯ ISR ç¤ºæ„ï¼š

![Untitled](./images//Untitled%204.png)

ä¸€å¼€å§‹ Chirpy é€‰æ‹©äº† egoist çš„ [Next FullStack Starter](https://github.com/egoist/next-fullstack-starter) ä½œä¸ºå§‹ç‚¹ï¼Œä¸»è¦æŠ€æœ¯æ ˆæ˜¯ï¼šNext.js + [Prisma](https://prisma.io/) + [GraphQL](https://graphql.org/) + [TypeGraphQL](https://typegraphql.com/) + [Tailwindcss](https://tailwindcss.com/)ã€‚ä½†æ·±å…¥å¼€å‘è¿‡ç¨‹ä¸­å‘ç° ORM Prisma å¹¶ä¸æ”¯æŒ [Subscription/real-time API](https://github.com/prisma/prisma/issues/298)ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹ç”¨æˆ·ä½“éªŒæ¯”è¾ƒé‡è¦çš„åŠŸèƒ½ï¼Œåœ¨æ…é‡è€ƒè™‘ä¹‹å backend è¿ç§»åˆ°äº† [Hasura](https://github.com/hasura/graphql-engine)ã€‚

### [Prisma](https://prisma.io/) â¡ï¸ [Hasura](https://github.com/hasura/graphql-engine)

ä¸¥æ ¼æ¥è¯´ [Prisma](https://prisma.io/) å’Œ [Hasura](https://github.com/hasura/graphql-engine) å¹¶ä¸ç®—æ˜¯åŒä¸€ç±»ä¸œè¥¿ã€‚[Hasura](https://github.com/hasura/graphql-engine) æ˜¯ä¸€ä¸ªæ”¯æŒé«˜å¹¶å‘çš„ GraphQL serverï¼Œæ”¯æŒç”¨ GraphQL å¢åˆ æ”¹æŸ¥æ•°æ®åº“(æ¯”å¦‚ [PostgreSQL](https://www.postgresql.org/))ï¼ŒåŒæ—¶ä¹Ÿæä¾›ä¸€å¥—å®Œæ•´çš„æƒé™æ§åˆ¶ã€‚[Prisma](https://prisma.io/) æ˜¯ä¸€ä¸ª ORMï¼Œä¸ºäº†æ”¯æŒ GraphQL è¿˜æ˜¯éœ€è¦æ‰‹å†™æ‰€å¯¹åº”çš„ [resolver](https://www.apollographql.com/docs/tutorial/resolvers/) ä»¥åŠç›¸åº”çš„æƒé™æ§åˆ¶ï¼Œå¼€å‘æˆæœ¬è¾ƒé«˜ï¼Œä½†ç›¸åº”çš„æ¯” Hasura æ›´åŠ çµæ´»ã€‚

|              | Prisma                              | Hasura                        |
| ------------ | ----------------------------------- | ----------------------------- |
| è¯­è¨€         | TypeScript                          | haskell                       |
| Type         | ORM                                 | GraphQL Server                |
| GraphQL API  | ğŸŸ¡Â  æ‰‹åŠ¨                            | âœ…Â  ç”±æ•°æ®åº“ Schema ç”Ÿæˆ      |
| é«˜å¹¶å‘       | ğŸŸ¡Â  å—é™äº Â  Node.js æ€§èƒ½å’Œåº”ç”¨æ¶æ„ | âœ…Â  (50M å†…å­˜æ”¯æŒ 1000 q/sec) |
| Subscription | ğŸ”´                                  | âœ…                            |
| çµæ´»æ€§       | âœ…                                  | ğŸŸ¡                            |

Hasura åº”ç”¨çš„æ¶æ„

![Untitled](./images//Untitled%205.png)

### [passportjs](https://www.passportjs.org/) â¡ï¸ [next-auth](https://next-auth.js.org/)

ç”¨æˆ·ç™»é™†ç³»ç»Ÿï¼ˆç¬¬ä¸‰æ–¹ç™»é™† + ä¼ ç»Ÿè´¦å·å¯†ç ï¼‰ä¹Ÿæœ‰ 2 ä¸ªæ¯”è¾ƒæˆç†Ÿçš„é€‰æ‹©ï¼Œä¸€å¼€å§‹é€‰æ‹©çš„æ˜¯ [passportjs](https://www.passportjs.org/), åœ¨æ·±å…¥å¼€å‘ä¸­é‡åˆ°å¾ˆå¤š OAuth å’Œå®‰å…¨ç›¸å…³çš„é—®é¢˜ï¼Œæœ€åé‡æ„æ¢åˆ°äº† next-authã€‚ç›¸æ¯”ä¹‹ä¸‹ next-auth æ›´åŠ ç°ä»£åŒ–ï¼ˆæä¾› React Hooksï¼Œåº“æœ¬èº«ä¹Ÿæ˜¯ç”¨ TypeScript å†™çš„ï¼‰ï¼Œæ›´å®‰å…¨ï¼ŒNext.js é›†æˆæ–¹ä¾¿ã€‚

|              | passportjs | next-auth |
| ------------ | ---------- | --------- |
| ç¬¬ä¸‰æ–¹ç™»é™†   | âœ…         | âœ…        |
| é‚®ç®±å¯†ç ç™»é™† | âœ…         | âœ…Â        |
| æ— å¯†ç ç™»é™†   | âœ…         | âœ…Â        |
| å®‰å…¨æ€§       | ğŸŸ¡         | âœ…        |
| React Hooks  | ğŸ”´         | âœ…        |
| Next.js é›†æˆ | ğŸ”´         | âœ…        |

### [Tailwindcss](https://tailwindcss.com/) ï¼†Â [twin.macro](https://github.com/ben-rogerson/twin.macro) & [radix-colors](https://www.radix-ui.com/colors)

[Tailwind](https://tailwindcss.com/) æ˜¯ä¸€ä¸ªåŸå­åŒ– CSS å¼€å‘æ¡†æ¶ï¼Œåœ¨ç†Ÿæ‚‰å®ƒä¹‹å CSS å¼€å‘æ•ˆç‡èƒ½æ˜¾è‘—çš„æå‡ ğŸš€ï¼›åŒæ—¶å®ƒæä¾›äº†ä¸€å¥—å®Œå¤‡ä¸”ç»å¾—ä½è€ƒéªŒçš„[é»˜è®¤ä¸»é¢˜é…ç½®](https://tailwindcss.com/docs/theme)ï¼Œä»¥åŠä¸€å¥—ä¸°å¯Œçš„ [SaaS UI åº“](https://tailwindui.com/)ï¼ˆä¸å®Œå…¨å…è´¹ï¼Œä½†å­¦ä¼š tailwind ä¹‹åæ‰‹å†™ç±»ä¼¼çš„ UI ä¸ä¼šå¤ªéš¾ï¼Œæ›´é‡è¦çš„æ˜¯è¿™é‡Œæœ‰å¸¸ç”¨ SaaS çš„ UI è®¾è®¡å¯ä¾›å‚è€ƒï¼Œå¯¹æˆ‘è¿™ä¸ªè®¾è®¡è‹¦æ‰‹éå¸¸æœ‰å¸®åŠ© ğŸ¥³ï¼‰ã€‚

å®é™…ä¸Š Chirpy æ˜¯å’Œ [twin.macro](https://github.com/ben-rogerson/twin.macro) ä¸€èµ·ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªç»“åˆ tailwind å’Œ CSS-in-JSï¼ˆstyled-component & emotionï¼‰ çš„åº“ï¼Œtailwind æ—©æœŸç‰ˆæœ¬åœ¨ç»„ä»¶åŒ–å¼€å‘ä¸­ä¼šé‡åˆ°æ ·å¼ç±»ä¸èƒ½è¢« overwrite çš„æƒ…å†µ, å› ä¸º tailwind æœ¬èº«è¾“å‡ºåŸå­ç±»ï¼š

```jsx
<p className="w-1 h-1">...</p>

// è¾“å‡º CSS ğŸ‘‡

.w-1	{
  width: 0.25rem;
}

.h-1	{
  height: 0.25rem;
}
```

twin.macro ç‰ˆæœ¬, ä¸éœ€è¦ CSS `!important` å°±èƒ½è¦†ç›–æ ·å¼ï¼š

```html
<p tw="w-1 h-1">...</p>

// è¾“å‡º html & css ğŸ‘‡

<p class="random-name">...</p>

.random-name { width: 0.25rem; height: 0.25rem; }
```

twin.macro ä¹Ÿæ”¯æŒ build çš„æ—¶å€™æ ¡éªŒï¼Œä¸åˆæ³•çš„æ ·å¼ä¼šæŠ¥é”™ï¼ˆæ¯”å¦‚`w-0.1`)ï¼Œå¯ä»¥é¿å…å†™å‡ºæ— ç”¨æ ·å¼ã€‚ä»¥åŠè‡ªç”±ç»„åˆå¤šä¸ª variantsï¼Œä¾‹å¦‚ï¼š`sm:(bg-black hover:(bg-white w-10))`ã€‚å½“ç„¶å®ƒä¹Ÿå¹¶ä¸å®Œç¾ï¼Œtailwind å¯ä»¥å¤ç”¨å·²æœ‰çš„ CSS ç±»ï¼Œè€Œå®ƒæ¯ä¸ª tw å‡ ä¹éƒ½ä¼šç”Ÿæˆæ–°çš„æ ·å¼, æœ€ç»ˆè¾“å‡ºçš„ bundle size twin ä¼šæ›´å¤§ä¸€ç‚¹ã€‚å®ƒä¹Ÿä¸æ”¯æŒä¸€äº› tailwind çš„ä¸€äº›å®˜æ–¹æ’ä»¶ï¼Œæ¯”å¦‚ï¼š[tailwindcss-typography](https://github.com/tailwindlabs/tailwindcss-typography)ï¼ˆç”¨äºç¼–è¾‘å™¨ï¼‰ã€‚æ•…ä¸¤è€…æ˜¯ç»“åˆä¸€èµ·ä½¿ç”¨ã€‚

tailwind çš„ Dark mode ä¸»è¦é ç”¨ `dark:` variantï¼ˆå¦‚ä¸‹é¢çš„ ğŸŒ°ï¼‰, å‡ ä¹æ¯ä¸ªé¢œè‰²å€¼éƒ½è¦å†™ä¸¤éï¼Œæˆ‘ç†æƒ³ä¸­çš„ dark mode æ˜¯è‡ªåŠ¨çš„ã€‚

```html
<div class="bg-white dark:bg-gray-900">...</div>
```

å› æ­¤è¿™é‡Œéœ€è¦ light/dark 2 å¥—é¢œè‰²ï¼Œ[radix-colors](https://www.radix-ui.com/colors) æ­£æ»¡è¶³è¦æ±‚ã€‚ä½†å®ƒè¦æ€ä¹ˆå’Œ tailwind ä¸€èµ·ç”¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š[CSS Variable](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties)ã€‚

é¦–å…ˆé…ç½® tailwind ä¸»é¢˜:

```jsx
module.exports = {
  theme: {
    colors: {
      bg: `var(--tw-colors-bg)`,
    },
  },
};
```

ç„¶åç»™åº”ç”¨æ³¨å…¥æ ·å¼ï¼š

```css
:root {
  --tw-colors-bg: white;
}
:root.dark {
  --tw-colors-bg: black;
}
```

é…åˆ [next-themes](https://github.com/pacocoursey/next-themes) è‡ªåŠ¨åœ¨ç”¨æˆ·åˆ‡æ¢ mode æ—¶åˆ‡æ¢ç½‘ç«™ CSS ç±»:

```html
// next-themes åœ¨ç”¨æˆ·åˆ‡æ¢ mode æ—¶è‡ªåŠ¨åˆ‡æ¢ .dark æœ‰æ— 
<html class="dark">
  ...
</html>
```

è¿™æ ·å°±èƒ½åœ¨åº”ç”¨åˆ‡æ¢ mode æ—¶è‡ªåŠ¨åˆ·æ–°é¢œè‰²ã€‚

è¿™é‡Œä¹Ÿé¡ºä¾¿è§£å†³äº†ç»„ä»¶çš„ä¸»é¢˜å®šåˆ¶åŠŸèƒ½ï¼Œ Chirpy åªéœ€è¦åœ¨ç»„ä»¶æ¸²æŸ“æ—¶æ³¨å…¥ç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡å€¼å³å¯ã€‚

### [Slate](https://github.com/ianstormtaylor/slate) â¡ï¸Â [tiptap](https://github.com/ueberdosis/tiptap)

è¯„è®ºç»„ä»¶ä½“éªŒæœ€æ ¸å¿ƒçš„æ˜¯å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¸€å¼€å§‹ Chirpy ç”¨çš„æ˜¯ [slate](https://github.com/ianstormtaylor/slate)ï¼Œå› ä¸ºå®ƒå’Œ React ç»“åˆæ¯”è¾ƒå¥½ï¼Œä½†å¼€å‘åˆ°åæœŸä¹Ÿé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ [markdown shortcuts](https://chirpy.dev/docs/features/markdown) å®ç°å¹¶ä¸é¡ºåˆ©ï¼Œåé¢è¿ç§»åˆ°äº†[tiptap](https://github.com/ueberdosis/tiptap)ï¼ŒåŠŸèƒ½æ›´åŠ å®Œå–„ï¼Œåº•å±‚ä¹ŸåŸºäºæ›´ç¨³å®šçš„ [ProseMirror](https://github.com/ProseMirror/prosemirror)ã€‚

|                    | slate    | tiptap      |
| ------------------ | -------- | ----------- |
| åŸºäº               | React    | ProseMirror |
| ç¨³å®šæ€§             | ğŸ”´Â issue | âœ…Â          |
| Markdown shortcuts | ğŸ”´       | âœ…          |
| åŠŸèƒ½ä¸°å¯Œåº¦         | ğŸ”´       | âœ…Â          |

### [apollo-client](https://github.com/apollographql/apollo-client) â¡ï¸Â [urql](https://github.com/FormidableLabs/urql)

[apollo-client](https://github.com/apollographql/apollo-client) æ¯«æ— ç–‘é—®æ˜¯æœ€æµè¡Œçš„ GraphQL clientï¼Œæœ€åˆé€‰æ‹©çš„ä¾¿æ˜¯å®ƒã€‚å°±åœ¨å‡†å¤‡å¼€æºä¹‹å‰ä¸ä¹…é‡åˆ°äº† 2 ä¸ªå¾ˆè¯¡å¼‚çš„ bugï¼ˆæŸäº›çŠ¶æ€æ­»æ´»ä¸æ›´æ–°ï¼‰ã€‚æœç´¢ç›¸å…³é—®é¢˜ä¹Ÿäº†è§£åˆ° [apollo æŠŠå¼€æºå½“æˆä¸€ç§è¥é”€æ‰‹æ®µ](https://blog.logrocket.com/why-i-finally-switched-to-urql-from-apollo-client/)ï¼ŒåŠ ä¹‹æˆ‘ä¸€ç›´å¾ˆå¤´ç—›å®ƒå¾ˆå¤§çš„ bundle sizeï¼Œéšåä¸‹å®šå†³å¿ƒ[è¿ç§»åˆ° urql](https://github.com/devrsi0n/chirpy/pull/85) è¿™ä¸ªå°å·§çš„å¤šçš„åº“ï¼Œäº‹å®è¯æ˜è¿™æ¬¡é‡æ„è¶…å€¼ï¼Œå‡å°‘äº†è¿‘ 45KB bundle sizeã€‚

![Untitled](./images//Untitled%206.png)

|                        | apollo-client | urql          |
| ---------------------- | ------------- | ------------- |
| bundle size            | ğŸŸ¡Â 33kb       | âœ…Â 7.1kb      |
| Next.js é›†æˆ           | ğŸ”´            | Â âœ… next-urql |
| Document Caching       | ğŸ”´            | âœ…            |
| Stale while Revalidate | âœ…Â            | âœ…Â            |

### [Plausible](https://github.com/plausible/analytics) ğŸ“ˆ

ä¸€å¼€å§‹ Chirpy è‡ªå·±å®ç°äº†ä¸€ä¸ªçš„æ•°æ®ç»Ÿè®¡/ Analyticsï¼Œä½†åé¢å‘ç°è¿™é‡Œé¢éœ€è¦è€ƒè™‘å¾ˆå¤šä¸œè¥¿ï¼ˆèšåˆæ•°æ®ã€æ€§èƒ½ã€å›¾è¡¨ç­‰ï¼‰ï¼Œä¸¥é‡æ‹–ç´¯äº†å¼€å‘è¿›åº¦ã€‚æœ€åè¿ç§»åˆ°äº† [Plausible](https://github.com/plausible/analytics)ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªä¸»æ‰“ä¿æŠ¤éšç§çš„å¼€æº SaaSã€‚ä¸ºäº†æ›´å¥½åœ°ä¿æŠ¤ç”¨æˆ·éšç§ï¼ŒChirpy ç”¨å®ƒè·‘åœ¨ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡å™¨ä¸Šè€Œä¸æ˜¯ç›´æ¥ç”¨å®ƒçš„æœåŠ¡ã€‚

Chirpy å¤ç”¨äº† Plausible çš„å‰ç«¯ä»£ç ä»¥é€‚é…è¯„è®ºç»„ä»¶çš„åœºæ™¯ã€‚åŒæ—¶ä¹ŸæŠŠå®ƒå‘æ•°æ®çš„è„šæœ¬ç›´æ¥æ”¾åˆ° Chirpy çš„ bundle + é‡æ˜ å°„å‘æ•°æ®çš„ API æ¥å£ï¼Œå¯ä»¥å¾ˆå¥½çš„è§£å†³æµè§ˆå™¨[å¹¿å‘Šè¿‡æ»¤å™¨è¿‡æ»¤æ‰è¯·æ±‚](https://plausible.io/docs/proxy/introduction)å¯¼è‡´æ•°æ®ä¸å‡†ç¡®çš„é—®é¢˜ã€‚å› æ­¤ä½ å¯ä»¥æŠŠ Chirpy å½“æˆä¸€ä¸ªå…è´¹ä¸”é«˜ç²¾ç¡®åº¦çš„ Analytics å·¥å…·æ¥ç”¨ ğŸ˜‰ã€‚

[Plausible çš„è¥æ”¶](https://twitter.com/PlausibleHQ/status/1473932247636090880)ä¹Ÿæ˜¯ Chirpy åŠªåŠ›çš„ç›®æ ‡ ğŸ’ª

![Untitled](./images//Untitled%207.png)

## CI & CD â™»

é¡¹ç›®çš„ CI/CD ä¸»è¦ä¾é  GitHub Actionã€‚ å¼€å‘æµç¨‹æ˜¯åŸºäº PR ï¼Œæ¯ä¸ª PR check-in ä¹‹å‰ä¼šè·‘ Cypress( ç«¯åˆ°ç«¯æµ‹è¯•ï¼‰ï¼Œjestï¼ˆå•å…ƒæµ‹è¯•ï¼‰ï¼Œä»¥åŠè¾“å‡º Next.js bundle size å˜åŒ–ï¼ˆé¿å…æ— æ„å¼•å…¥ä»£ç é€ æˆ bundle size é—®é¢˜ï¼‰ã€‚

åé¢ä¼šå¼•å…¥ [hasura schema CI/CD](https://github.com/tibotiber/hasura-action)ï¼Œå‡å°‘äººè‚‰å‡çº§ schema å‡ºé—®é¢˜ã€‚

## éƒ¨ç½² ğŸ’¿

è¿™é‡Œåˆ†ä¸º Next.js, Hasura å’Œ Plausible å‡ éƒ¨åˆ†ï¼š

- Next.js è‡ªç„¶é€‰æ‹©éƒ¨ç½²åˆ°å¼€å‘å®ƒçš„å…¬å¸ â†’ [Vercel](https://vercel.com/) æ˜¯æœ€ä½³é€‰æ‹©ï¼Œç›¸æ¯”åŒç±»æœåŠ¡ï¼ˆæ¯”å¦‚ [netlify](https://www.netlify.com/)ï¼‰æ„å»ºæ€§èƒ½ã€å›¾ç‰‡ä¹‹ç±»çš„ä¼˜åŒ–æ•ˆæœæ›´å¥½ï¼Œéƒ¨ç½²ä½“éªŒä¹Ÿå±ä¸€æµã€‚
- Hasura å‰ç½®äº†ä¸€ä¸ª [Caddy](https://github.com/caddyserver/caddy) HTTP Server å¯ä»¥è‡ªåŠ¨ç»™ HTTPS åŸŸåç­¾åï¼ŒåŒæ—¶ä¹Ÿä¸ºæœªæ¥æ”¯æŒå¼¹æ€§è´Ÿè½½å‡è¡¡ä½œå‡†å¤‡ã€‚
- Plausible å®ä¾‹å•ç‹¬éƒ¨ç½²é¿å…å½±å“ä¸šåŠ¡æ•°æ®ï¼ŒåŒæ—¶ä¹ŸåŠ ä¸Šäº† [Caddy](https://github.com/caddyserver/caddy) HTTP Serverã€‚
- Hasura å’Œ Plausible å„è‡ªéƒ¨ç½²åˆ°äº†ä¸€ä¸ª [DigitalOcean](https://www.digitalocean.com/?refcode=92c5af253f6a&utm_campaign=Referral_Invite&utm_medium=Referral_Program&utm_source=badge) è™šæ‹Ÿæœºï¼Œä¸»è¦çœ‹ä¸­é«˜æ€§ä»·æ¯”ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚

åç»­æ”¯æŒå›¾ç‰‡ä¸Šä¼ è€ƒè™‘ä½¿ç”¨ [Cloudflare Images](https://www.cloudflare.com/products/cloudflare-images/), åŠŸèƒ½é½å…¨ï¼Œæ€§ä»·æ¯”ä¹Ÿä¸é”™ã€‚

## è¿œæœŸè§„åˆ’ ğŸ›¸

è¯„è®ºç»„ä»¶åªæ˜¯æˆ‘çš„ç¬¬ä¸€æ­¥ï¼Œåœ¨åŠŸèƒ½é€æ¸å®Œå–„ä¹‹å Chirpy ä¹Ÿä¼šè€ƒè™‘åšç±»ä¼¼ [intercom](https://www.intercom.com/) çš„èŠå¤©ç»„ä»¶ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œhasura + WebSocket æ¶æ„å¤©ç„¶é€‚åˆè¿™ç§è½»é‡èŠå¤©åº”ç”¨ã€‚Chirpy ç›®æ ‡æ˜¯æ‰“é€ ä¸€å¥—å®Œæ•´çš„å¼€æºç”¨æˆ·æ²Ÿé€šçš„è§£å†³æ–¹æ¡ˆã€‚

![Untitled](./images//Untitled%208.png)

## ç¤¾åŒº/community ğŸ˜

ä½œä¸ºå¼€æºé¡¹ç›®ï¼Œç¤¾åŒºæ˜¯æˆ‘å¾ˆçœ‹é‡çš„ä¸€å—ï¼Œé¼“åŠ±å¤§å®¶å‚ä¸è´¡çŒ®ï¼ˆissueï¼Œdiscussionï¼ŒPRï¼‰ã€‚è®¡åˆ’æœ‰äº†ä¸€å®šæ”¶å…¥ä¹Ÿä¼šå®šæœŸç»™æ´»è·ƒçš„å¼€å‘è€…å‘æ”¾ä¸€å®šçš„é‡‘é’±æ”¯æŒï¼Œå›é¦ˆç¤¾åŒºã€‚æ¬¢è¿åˆ° [Chirpy](https://github.com/devrsi0n/chirpy) ç¤¾åŒºç©è€ ğŸ™Œã€‚

éå¸¸æ„Ÿè°¢ä½ çœ‹åˆ°è¿™é‡Œã€‚ğŸ‘‡ ä¸‹é¢å°±æ˜¯ä¸€ä¸ª Chirpy è¯„è®ºç»„ä»¶ï¼Œæ¬¢è¿ä½¿ç”¨ã€‚
